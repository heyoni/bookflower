{% extends 'base.html' %}
{% load static %}
{% block title %}í™ˆ - ì±…ë°”ë¼ê¸°{% endblock %}

{% block content %}
<div class="sunflower-container">
    <h1>ğŸŒ» ë‚˜ì˜ í•´ë°”ë¼ê¸° ğŸŒ»</h1>

    <!-- í•´ë°”ë¼ê¸° ì„±ì¥ í™”ë©´ -->
    <div class="sunflower-growth">
        <div class="sunflower" data-height="{{ sunflower.current_height_cm }}">
            <div class="height-info">
                <p>ë‚´ í‚¤ëŠ”</p>
                <p>{{ sunflower.current_height_cm|floatformat:2 }}cm</p>
            </div>
            {% if sunflower.level == 1 %}
                <img src="{% static 'images/level1.jpeg' %}" alt="Level {{ sunflower.level }}">
            {% elif sunflower.level == 2 %}
                <img src="{% static 'images/level2.jpeg' %}" alt="Level {{ sunflower.level }}">
            {% elif sunflower.level == 3 %}
                <img src="{% static 'images/level3.jpeg' %}" alt="Level {{ sunflower.level }}">
            {% elif sunflower.level == 4 %}
                <img src="{% static 'images/level4.jpeg' %}" alt="Level {{ sunflower.level }}">
            {% elif sunflower.level == 5 %}
                <img src="{% static 'images/level5.webp' %}" alt="Level {{ sunflower.level }}">
            {% else %}
                <img src="{% static 'images/level1.jpeg' %}" alt="Level {{ sunflower.level }}">
            {% endif %}
            <div class="sunflower-stem"></div>
        </div>
    </div>

    <!-- ì„±ì¥ í†µê³„ -->
    <div class="growth-stats">
        <h3>ğŸ“Š ì„±ì¥ í˜„í™©</h3>
        <div class="stat-item">
            <span class="stat-label">ğŸŒ± í•´ë°”ë¼ê¸° í‚¤</span>
            <span class="stat-value">{{ sunflower.current_height_cm|floatformat:1 }}cm</span>
        </div>
        <div class="stat-item">
            <span class="stat-label">ğŸ“– ì´ ì½ì€ í˜ì´ì§€</span>
            <span class="stat-value">{{ sunflower.total_pages_read }}í˜ì´ì§€</span>
        </div>
        <div class="stat-item">
            <span class="stat-label">â­ ì„±ì¥ ë‹¨ê³„</span>
            <span class="stat-value">{{ sunflower.level }}ë‹¨ê³„</span>
        </div>
        <div class="stat-item">
            <span class="stat-label">ğŸ“š ì½ê³  ìˆëŠ” ì±…</span>
            <span class="stat-value">{{ reading_books }}ê¶Œ</span>
        </div>
        <div class="stat-item">
            <span class="stat-label">âœ… ì™„ë…í•œ ì±…</span>
            <span class="stat-value">{{ completed_books }}ê¶Œ</span>
        </div>
    </div>

    <!-- ìµœê·¼ ì½ì€ ì±… -->
    {% if recent_books %}
    <div class="recent-books">
        <h3>ğŸ“– ìµœê·¼ ì½ì€ ì±…</h3>
        {% for item in recent_books %}
        <div class="book-card">
            <div class="book-title">{{ item.book.book_title }}</div>
            <div class="book-author">{{ item.book.book_author }}</div>
            <div class="book-progress">
                <div class="progress-bar" data-percent="{{ item.progress_percent }}">
                    <div class="progress-fill"></div>
                </div>
                <div class="progress-text">{{ item.book.current_page }}/{{ item.book.total_pages }}</div>
            </div>
            <div class="book-status">
                {% if item.book.status == 'reading' %}
                    <span style="color: #4CAF50;">ğŸ“– ì½ëŠ” ì¤‘</span>
                {% elif item.book.status == 'completed' %}
                    <span style="color: #2196F3;">âœ… ì™„ë…</span>
                {% elif item.book.status == 'paused' %}
                    <span style="color: #FF9800;">â¸ï¸ ì¼ì‹œì •ì§€</span>
                {% elif item.book.status == 'dropped' %}
                    <span style="color: #f44336;">âŒ ì¤‘ë‹¨</span>
                {% endif %}
            </div>
        </div>
        {% endfor %}
    </div>
    {% else %}
    <div class="empty-state">
        <h3>ğŸ“š ì•„ì§ ì½ê³  ìˆëŠ” ì±…ì´ ì—†ì–´ìš”</h3>
        <p>ì²« ë²ˆì§¸ ì±…ì„ ì¶”ê°€í•´ì„œ í•´ë°”ë¼ê¸°ë¥¼ í‚¤ì›Œë³´ì„¸ìš”!</p>
        <a href="{% url 'books:search' %}" class="btn btn-full">ğŸ“– ì±… ì°¾ì•„ë³´ê¸°</a>
    </div>
    {% endif %}

    <!-- ì„±ì¥ ê²©ë ¤ ë©”ì‹œì§€ -->
    <div class="encouragement-message">
        {% if sunflower.current_height_cm < 10 %}
            <p>ğŸŒ± í•´ë°”ë¼ê¸°ê°€ ì´ì œ ë§‰ ì‹¹íŠ¸ê¸° ì‹œì‘í–ˆì–´ìš”! ê¾¸ì¤€íˆ ì±…ì„ ì½ì–´ë³´ì„¸ìš”.</p>
        {% elif sunflower.current_height_cm < 50 %}
            <p>ğŸŒ¿ í•´ë°”ë¼ê¸°ê°€ ì‘¥ì‘¥ ìë¼ê³  ìˆì–´ìš”! ê³„ì† ì½ì–´ì£¼ì„¸ìš”.</p>
        {% elif sunflower.current_height_cm < 100 %}
            <p>ğŸŒ» ì™€! í•´ë°”ë¼ê¸°ê°€ ì •ë§ ë§ì´ ìëì–´ìš”! ë©‹ì§„ ê½ƒì„ í”¼ìš¸ ë•Œê°€ ë‹¤ê°€ì™”ì–´ìš”.</p>
        {% else %}
            <p>ğŸŒ»âœ¨ ì¶•í•˜í•´ìš”! ì•„ë¦„ë‹¤ìš´ í•´ë°”ë¼ê¸°ê°€ ì™„ì„±ë˜ì—ˆì–´ìš”! ì •ë§ ëŒ€ë‹¨í•´ìš”!</p>
        {% endif %}
    </div>
</div>

{% block extra_css %}
<style>
.recent-books {
    margin-top: 2rem;
}

.recent-books h3 {
    margin-bottom: 1rem;
    color: #333;
}

.book-status {
    margin-top: 0.5rem;
    font-size: 0.9rem;
}

.empty-state {
    text-align: center;
    padding: 2rem;
    color: #666;
}

.empty-state h3 {
    margin-bottom: 1rem;
    color: #333;
}

.encouragement-message {
    background: linear-gradient(135deg, #FFF9C4 0%, #FFF176 100%);
    border-radius: 15px;
    padding: 1.5rem;
    margin-top: 2rem;
    text-align: center;
    color: #333;
    font-weight: 500;
}
</style>

{% endblock %}
{% endblock %}